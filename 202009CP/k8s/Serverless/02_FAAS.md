#### What is function compute 什么是函数计算

在传统 Serverful 架构下，部署一个应用需要购买服务器、部署操作系统、搭建开发 环境、编写代码、构建应用、部署应用、、配置负载均衡机制、搭建日志分析与监控系统， 应用上线后，继续监控应用的运行情况。而在 Serverless 架构下，开发者只需要关注应 用的开发构建和部署，无需关心服务器相关操作与运维，在函数计算架构下，开发者只需要 编写业务代码并监控业务运行情况。这使开发者从繁重的运维工作中解放出来，可以把精力 投入到更有意义的业务开发上。


#### 函数计算优势

* 敏捷开发
1. 使用函数计算时，用户只需聚焦于业务逻辑的开发，编写最重要的 “核心代码”;
2. 不再需要关心服务器购买、负载均衡、自动伸缩等运维操作;
3. 极大地降低了服务搭建的复杂性，有效提升开发和迭代的速度。

* 弹性扩容
1. 函数计算根据请求量自动进行弹性扩容，无需任何手动配置;
2. 毫秒级调度计算资源，轻松应对业务洪峰。

* 稳定好可用
1. 函数计算分布式集群化部署，支持多可用区;
2. 如果某个可用区因自然灾害或电力故障导致瘫痪，函数计算会迅速切换到同区域其他可用区的基础设施运行函数，确保服务高可用。

* 有竞争力的成本
1. 函数计算提供了丰富的计量模式，帮助您在不同场景获得显著成本优势;
2. 后付费模型按实际使用计算资源计费，不占用计算资源则不计费，资源利用率高达100% ;
3. 预付费模型根据业务负载估算提前预购计算力，单价更低，组合使用后付费和预付费方式将有效降低成本。



#### 函数计算流程

当函数第一次被调用的时候，函数计算需要动态调度实例、下载代码、解 压代码、启动实例，得到一个可执行函数的代码环境。然后才开始在系统分配的实例中真正 地执行用户的初始化函数，执行函数业务逻辑。这个调度实例启动实例的过程，就是系统的 *冷启动过程*。

函数逻辑执行结束后，不会立即释放掉实例，会等一段时间，如果在这段时间内有新的 调用，会复用这个实例，比如上图中的 Request 2，由于执行环境已经分配好了， Request 2 可以直接使用，所以 Request 2 就不会遇到冷启动。
Request 2 执行结束后，等待一段时间，如果这段时间没有新的请求分配到这个实例 上，那系统会回收实例，释放执行环境。此实例释放后，新的请求 Request 3 来到函数 计算，需要重新调度实例、下载代码、解压代码，启动实例，又会遇到冷启动。

使用预留实例可以完全避免冷启动，预留实例是在用户预留后就分配实例，准备执行环 境，请求结束后系统也不会自动回收实例。
预留实例不由系统自动分配与回收，由用户控制实例的生命周期，可以长驻不销毁，这 将彻底消除实例冷启动带来的延时毛刺，提供极致性能，也为在线应用迁移至函数计算扫清 障碍。

如果业务场景不适合使用预留实例，那就要设法降低冷启动的延时，比如降低代码包大 小，可以降低下载代码包、解压代码包的时间。Initializer 函数是实例的初始化函数， Initializer 在同一实例中执行且只执行一次，所以可以将一些耗时的公共逻辑放到 Initializer 中，比如在 NAS 中加载依赖、建立连接等等。另外要尽量保持请求连续稳定， 避免突发的流量，由于系统已启动的实例不足以支撑大量的突发流量，就会带来不可避免的 冷启动。
