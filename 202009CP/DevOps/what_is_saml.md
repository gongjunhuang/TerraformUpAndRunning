#### SAML简介

*What is SAML?*

SAML(Security Assertion Markup Language，安全性断言标记语言）是一个开放标准，允许身份提供商（IdP）将授权凭据传递给服务提供商（SP），意思是可以使用一组凭据登陆许多不同的网站。与单独管理邮件登录、CRM软件以及Active Directory等相比，为每个用户管理一个登录要简单的多。

SAML事务使用可扩展标记语言（XML）进行身份提供商和服务提供商之间的标准化通信。SAML是用户身份验证和使用服务授权之间的链接。

SAML当前版本是[2.0](https://wiki.oasis-open.org/security/FrontPage)。该标准从1.1开始有很大的变化，所以大版本之间不兼容。采用SAML可使IT部门在维护安全的联合身份管理系统的同时使用软件即服务（SaaS）解决方案。SAML启用了单点登录（SSO），意味着一旦用户身份被主网站（身份鉴别服务器，Identity Provider，IDP）认证过后，该用户再去访问其他在主站注册过的应用（服务提供商，Service Providers，SP）时，都可以直接登录，而不用再输入身份和口令。

*What is SAML used for?*

SAML为用户简化身份提供商和服务提供商的联合身份验证和授权过程。SAML提供了一个解决方案，允许身份提供商和服务提供商彼此分开存在，从而集中了用户管理并提供了对SaaS解决方案的访问。

SAML实现了一种在身份提供商和服务提供商之间传递用户身份验证和授权的安全方法。当用户登录到启用了SAML的应用程序时，服务提供商将向相应的身份提供商请求授权。身份提供商对用户的凭据进行身份验证，然后将用户的授权返回给服务提供商，用户就可以使用该应用程序。

SAML身份验证是验证用户身份和凭据（密码，两因素身份验证等）的过程。SAML授权告诉服务提供商哪些访问权限可以授予已认证的用户。

*What is a SAML provider?*

SAML提供商是一种系统，可以帮助用户访问所需的服务。SAML提供商有两种主要类型，即服务提供商和身份提供商。

服务提供商需要身份提供商的身份验证才能向用户授予授权；身份提供商执行对最终用户的身份验证，然后将其与用户对服务的访问权限一起发送给服务提供商。

Microsoft Active Directory或Azure是常见的身份提供商。Salesforce和其他CRM解决方案通常是服务提供商，因为它们依赖身份提供商进行用户身份验证。

*What is a SAML assertion?*

SAML断言是身份提供商发送给包含用户授权的服务提供商的XML文档。有三种不同类型的SAML断言-身份验证，属性和授权决策。

* 身份验证断言可证明用户的身份并提供用户登录的时间以及他们使用的身份验证方法
* 归因断言将SAML属性传递给服务提供商-SAML属性是提供有关用户信息的特定数据
* 授权决策断言表明用户是否被授权使用该服务，或者标识提供商是否由于密码失败或缺少该服务的权限而拒绝了他们的请求。

*How does SAML work?*

SAML通过在身份提供商和服务提供商之间传递有关用户，登录名和属性的信息来工作。每个用户都使用标识提供程序登录一次，然后在用户尝试访问这些服务时，标识提供商可以将SAML属性传递给服务提供商。服务提供商向标识提供商请求授权和认证。由于这两个系统都使用相同的语言-SAML，因此用户只需登录一次。

每个身份提供商和服务提供商都需要就SAML的配置达成一致。两端都需要具有正确的配置，SAML身份验证才能正常工作。

*SAML example*

* Frodo尝试打开Aliyun登录页面
* 阿里云-服务提供商，向标识提供商请求验证Frodo的账号密码，标识提供商向服务提供商发送授权和验证消息，允许Frodo登录系统
